{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Admin/Desktop/Web_ShopApple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";var ProdukContext=/*#__PURE__*/React.createContext();var ProdukProvider=/*#__PURE__*/function(_Component){_inherits(ProdukProvider,_Component);var _super=_createSuper(ProdukProvider);function ProdukProvider(){var _this;_classCallCheck(this,ProdukProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={produks:storeProducts,detailProduk:detailProduct,cart:JSON.parse(localStorage.getItem('cart'))||[],// cart: [],\nmodalOpen:false,modalProduk:detailProduct,cartSubtotal:0,cartTax:0,cartTotal:0};_this.componentDidMount=function(){_this.setProduks();};_this.setProduks=function(){var tempProduks=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);if(localStorage.getItem('cart')!==null){var getCartLocalStorage=JSON.parse(localStorage.getItem('cart'));getCartLocalStorage.forEach(function(items){// console.log(singleItem);\nif(singleItem.id===items.id){singleItem.inCart=true;console.log(singleItem.inCart);}});}tempProduks=[].concat(_toConsumableArray(tempProduks),[singleItem]);});_this.addTotals();_this.setState(function(){return{produks:tempProduks};});};_this.getItem=function(id){var produk=_this.state.produks.find(function(item){return item.id===id;});return produk;};_this.handleDetail=function(id){var produk=_this.getItem(id);console.log(produk);_this.setState(function(){return{detailProduk:produk};});};_this.addToCart=function(id){var tempProduks=_toConsumableArray(_this.state.produks);var index=tempProduks.indexOf(_this.getItem(id));var produk=tempProduks[index];produk.inCart=true;produk.count=1;var giaBan=produk.giaBan;produk.total=giaBan;var Swal=require('sweetalert2');Swal.fire({text:'Sản phẩm đã được thêm vào giỏ!',icon:'Thành công'});_this.setState(function(){// localStorage.setItem('cart', json.stringify()));\nlocalStorage.setItem('cart',JSON.stringify([].concat(_toConsumableArray(_this.state.cart),[produk])));return{produks:tempProduks,cart:[].concat(_toConsumableArray(_this.state.cart),[produk])};},function(){_this.addTotals();});};_this.openModal=function(id){var produk=_this.getItem(id);_this.setState(function(){return{modalProduk:produk,modalOpen:true};});};_this.closeModal=function(id){_this.setState(function(){return{modalOpen:false};});};_this.increase=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduk=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduk);var produk=tempCart[index];produk.count=produk.count+1;produk.total=produk.count*produk.giaBan;_this.setState(function(){localStorage.setItem('cart',JSON.stringify(_toConsumableArray(tempCart)));return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});};_this.decrease=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduk=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduk);var produk=tempCart[index];produk.count=produk.count-1;if(produk.count===0){_this.removeItem(id);}else{produk.total=produk.count*produk.giaBan;_this.setState(function(){localStorage.setItem('cart',JSON.stringify(_toConsumableArray(tempCart)));return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});}};_this.removeItem=function(id){console.log(id);var tempProduks=_toConsumableArray(_this.state.produks);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProduks.indexOf(_this.getItem(id));var removeProduk=tempProduks[index];removeProduk.inCart=false;removeProduk.count=0;removeProduk.total=0;Swal.fire({text:'Sản phẩm đã được xóa khỏi giỏ!',icon:'Thành công'});_this.setState(function(){localStorage.setItem('cart',JSON.stringify(_toConsumableArray(tempCart)));return{cart:_toConsumableArray(tempCart),produks:_toConsumableArray(tempProduks)};},function(){_this.addTotals();});};_this.clearCart=function(){Swal.fire({text:'Sản phẩm đã được thêm vào giỏ!',icon:'Thành công'});localStorage.removeItem('cart');_this.setState(function(){return{cart:[]};},function(){_this.setProduks();_this.addTotals();});};_this.addTotals=function(){var subtotal=0;_this.state.cart.map(function(item){return subtotal+=item.total;});var tempTax=subtotal*0.1;var tax=parseFloat(tempTax.toFixed(2));var total=subtotal+tax;_this.setState(function(){return{cartSubtotal:subtotal,cartTax:tax,cartTotal:total};});};return _this;}_createClass(ProdukProvider,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(ProdukContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increase:this.increase,decrease:this.decrease,clearCart:this.clearCart,removeItem:this.removeItem}),children:this.props.children});}}]);return ProdukProvider;}(Component);var ProdukConsumer=ProdukContext.Consumer;export{ProdukProvider,ProdukConsumer};","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Web_ShopApple/src/Context.js"],"names":["React","Component","storeProducts","detailProduct","Swal","ProdukContext","createContext","ProdukProvider","state","produks","detailProduk","cart","JSON","parse","localStorage","getItem","modalOpen","modalProduk","cartSubtotal","cartTax","cartTotal","componentDidMount","setProduks","tempProduks","forEach","item","singleItem","getCartLocalStorage","items","id","inCart","console","log","addTotals","setState","produk","find","handleDetail","addToCart","index","indexOf","count","giaBan","total","require","fire","text","icon","setItem","stringify","openModal","closeModal","increase","tempCart","selectedProduk","decrease","removeItem","filter","removeProduk","clearCart","subtotal","map","tempTax","tax","parseFloat","toFixed","props","children","ProdukConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {storeProducts,detailProduct} from './data';\nimport Swal from 'sweetalert2';\n\nconst ProdukContext = React.createContext();\n\nclass ProdukProvider extends Component {\n\n    state = {\n        produks : storeProducts,\n        detailProduk : detailProduct,\n        cart: JSON.parse(localStorage.getItem('cart')) || [],\n        // cart: [],\n        modalOpen : false,\n        modalProduk : detailProduct,\n        cartSubtotal : 0,\n        cartTax : 0,\n        cartTotal : 0,\n    }\n\n    componentDidMount = () => {\n        this.setProduks();\n    }\n\n    setProduks = () => {\n        let tempProduks = [];\n        storeProducts.forEach(item => {\n            const singleItem = {...item};\n            if (localStorage.getItem('cart') !== null) {\n                let getCartLocalStorage = JSON.parse(localStorage.getItem('cart'));\n                getCartLocalStorage.forEach(items => {\n                    // console.log(singleItem);\n                    if (singleItem.id === items.id)\n                    {\n                        singleItem.inCart = true;\n                        console.log(singleItem.inCart);\n                    }\n                })\n            }\n            tempProduks = [...tempProduks,singleItem];\n        });\n\n        this.addTotals();\n\n        this.setState(() => {\n            return { produks: tempProduks };\n        });\n\n    }\n\n    getItem = (id) => {\n        const produk = this.state.produks.find(item => item.id ===id );\n        return produk;\n    }\n\n    handleDetail = (id) => {\n        const produk = this.getItem(id);\n        console.log(produk);\n        this.setState(()=>{\n            return { detailProduk:produk}\n        })\n    }\n\n    addToCart = (id) => {\n        let tempProduks = [...this.state.produks];\n        const index = tempProduks.indexOf(this.getItem(id));\n        const produk = tempProduks[index];\n        produk.inCart = true;\n        produk.count = 1;\n        const  giaBan = produk.giaBan;\n        produk.total = giaBan;\n\n        const Swal = require('sweetalert2');\n        Swal.fire({\n            text: 'Sản phẩm đã được thêm vào giỏ!',\n            icon: 'Thành công'\n        })\n        this.setState(()=>{\n            // localStorage.setItem('cart', json.stringify()));\n            localStorage.setItem('cart', JSON.stringify([...this.state.cart, produk]));\n            return {produks:tempProduks, cart: [...this.state.cart,produk]};\n        },\n        ()=>{\n            this.addTotals();\n        });\n    }\n\n    openModal = (id) => {\n        const produk = this.getItem(id);\n        this.setState(()=>{\n            return {modalProduk:produk,modalOpen:true};\n        })\n    }\n\n    closeModal = (id) => {\n        this.setState(()=>{\n            return {modalOpen:false}\n        })\n    }\n\n    increase = (id) => {\n        let tempCart = [...this.state.cart];\n        const selectedProduk = tempCart.find(item => item.id === id);\n        const index = tempCart.indexOf(selectedProduk);\n        const produk = tempCart[index];\n        produk.count = produk.count + 1;\n        produk.total = produk.count * produk.giaBan;\n\n        this.setState(()=>{\n            localStorage.setItem('cart', JSON.stringify([...tempCart]));\n\n            return {\n                cart : [...tempCart]\n            }\n        },\n        ()=>{\n            this.addTotals();\n        })\n    }\n\n    decrease = (id) => {\n        let tempCart = [...this.state.cart];\n        const selectedProduk = tempCart.find(item => item.id === id);\n        const index = tempCart.indexOf(selectedProduk);\n        const produk = tempCart[index];\n        produk.count = produk.count - 1;\n        if(produk.count===0)\n        {\n            this.removeItem(id);\n        }\n        else{\n            produk.total = produk.count * produk.giaBan;\n            this.setState(() => {\n                localStorage.setItem('cart', JSON.stringify([...tempCart]));\n                return {\n                    cart: [...tempCart]\n                }\n            },\n                () => {\n                    this.addTotals();\n                })\n        }\n\n        \n    }\n\n    removeItem = (id) => {\n        console.log(id);\n        let tempProduks = [...this.state.produks];\n        let tempCart = [...this.state.cart];\n        tempCart = tempCart.filter(item => item.id !== id);\n\n        const index = tempProduks.indexOf(this.getItem(id));\n        let removeProduk = tempProduks[index];\n        removeProduk.inCart = false;\n        removeProduk.count = 0;\n        removeProduk.total = 0;\n\n        Swal.fire({\n            text: 'Sản phẩm đã được xóa khỏi giỏ!',\n            icon: 'Thành công'\n           \n        })\n        this.setState(()=>{\n            localStorage.setItem('cart', JSON.stringify([...tempCart]));\n            return {\n                cart : [...tempCart],\n                produks : [...tempProduks],\n            }\n        },\n        ()=>{\n            this.addTotals();\n        })\n    }\n\n    clearCart = () => {\n        Swal.fire({\n            text: 'Sản phẩm đã được thêm vào giỏ!',\n            icon: 'Thành công'\n        })\n        localStorage.removeItem('cart');\n        this.setState(()=>{\n            return {\n                cart : []\n            }\n        },()=>{\n            this.setProduks();\n            this.addTotals();\n        })\n    }\n\n    addTotals = () =>{\n        let subtotal = 0;\n        this.state.cart.map(item=>(subtotal+=item.total));\n        const tempTax = subtotal * 0.1;\n        const tax = parseFloat(tempTax.toFixed(2));\n        const total = subtotal + tax;\n        this.setState(()=>{\n            return {\n                cartSubtotal: subtotal,\n                cartTax: tax,\n                cartTotal: total,\n            }\n        })\n    }\n\n    render() {\n        return (\n            <ProdukContext.Provider value={{\n                    ...this.state,\n                    handleDetail: this.handleDetail,\n                    addToCart: this.addToCart,\n                    openModal : this.openModal,\n                    closeModal : this.closeModal,\n                    increase: this.increase,\n                    decrease: this.decrease,\n                    clearCart: this.clearCart,\n                    removeItem: this.removeItem,\n                }}>\n                {this.props.children}\n            </ProdukContext.Provider>\n        );\n    }\n}\n\nconst ProdukConsumer = ProdukContext.Consumer;\n\nexport {ProdukProvider,ProdukConsumer};"]},"metadata":{},"sourceType":"module"}